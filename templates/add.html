<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <title>用語を追加 - MyDictionary</title>
  <link href="https://fonts.googleapis.com/css2?family=Zen+Maru+Gothic:wght@400;500;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="/static/style.css">
  <style>
    body { font-family: sans-serif; margin: 2rem; max-width: 600px; }
    h1 { color: #333; }
    form { display: flex; flex-direction: column; gap: 1rem; }
    label { font-weight: bold; }
    input, textarea { padding: 0.5rem; font-size: 1rem; }
    button { padding: 0.7rem 1.5rem; font-size: 1rem; cursor: pointer; }
    .msg { margin-top: 1rem; }
    a { display: inline-block; margin-top: 1rem; }
  </style>
</head>
<body>
  <h1>新しい用語を追加</h1>
  <form id="termForm">
    <label>単語（word）</label>
    <input type="text" id="word" required />

    <label>読み（reading / optional）</label>
    <input type="text" id="reading" />

    <label>説明（description）</label>
    <textarea id="description" rows="5" required></textarea>

    <label>画像URL（任意）</label>
    <input type="url" id="image_url" />

    <button type="submit">登録する</button>
  </form>

  <div class="msg" id="msg"></div>

  <a href="/web">← 一覧に戻る</a>

  <script>
    document.getElementById("termForm").addEventListener("submit", async (e) => {
      e.preventDefault();
      const data = {
        word: document.getElementById("word").value,
        reading: document.getElementById("reading").value,
        description: document.getElementById("description").value,
        image_url: document.getElementById("image_url").value,
      };

      const res = await fetch("/add_term", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify(data),
      });

      const msg = document.getElementById("msg");
      if (res.ok) {
        msg.textContent = "✅ 登録が完了しました！";
        msg.style.color = "green";
        e.target.reset();
      } else {
        msg.textContent = "⚠️ 登録に失敗しました。";
        msg.style.color = "red";
      }
    });
  </script>
</body>
</html>
